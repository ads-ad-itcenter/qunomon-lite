# qunomon-lite: Lightweight tool for using Qunomon, AIT

[Qunomon](https://aistairc.github.io/qunomon/)ãŠã‚ˆã³AIT(AI system Test package)ã®ç°¡æ˜“åˆ©ç”¨ãƒ„ãƒ¼ãƒ«

## ğŸ“Œ Description

[Qunomon](https://aistairc.github.io/qunomon/)ãŒæä¾›ã™ã‚‹ä¸€éƒ¨ã®æ©Ÿèƒ½ã‚’ç°¡æ˜“çš„ã«åˆ©ç”¨ã§ãã‚‹ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»Pythonãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
Qunomonã‚’èµ·å‹•ã™ã‚‹ã“ã¨ãªãAIT(AI system Test package)ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä¸‹è¨˜ã«æŒ™ã’ã‚‹ã‚ˆã†ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ãŠã„ã¦ã€MLé–‹ç™ºè€…ãŒPoCã‚„é–‹ç™ºæ™‚ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚„Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ»Jupyterãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã‹ã‚‰åˆ©ç”¨ã—ãŸã‚Šã€MLé–‹ç™ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸Šã§åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚
* MLé–‹ç™ºè€…ãŒã€è‡ªèº«ã®é–‹ç™ºç’°å¢ƒã§ã€Qunomonã®AIã‚·ã‚¹ãƒ†ãƒ è©•ä¾¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆAIT: AI system Test packageï¼‰ã‚’ãŠè©¦ã—ã§ä½¿ã£ã¦ã¿ãŸã„
* MLé–‹ç™ºè€…ãŒã€Qunomonã®å“è³ªãƒ¬ãƒãƒ¼ãƒˆã‚’åŸºã«ã€MLãƒ¢ãƒ‡ãƒ«ã®æ”¹å–„å¯¾å¿œã‚’è¡Œã£ã¦ã„ã¦ã€AITã‚’ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ã§å®Ÿè¡Œã—ã¦æ”¹å–„å…·åˆã‚’è¦‹ãŸã„
* MLé–‹ç™ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã¦ã€AITã‚’å®Ÿè¡Œã—ã€å“è³ªæŒ‡æ¨™ã¨ã—ã¦æ´»ç”¨ã—ãŸã„

Note: å½“ãƒ„ãƒ¼ãƒ«ã¯Qunomonã‚’ç½®ãæ›ãˆã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã‚ˆã£ã¦ã€Qunomonã®åˆ©ç”¨ã‚’æ¤œè¨ãã ã•ã„ã€‚


## âœ… Features

ã€ŒAITã®å®Ÿè¡Œã€ã‚„ã€ŒAITã®å®Ÿè¡Œçµæœè¡¨ç¤ºã€ã«é–¢ã—ã¦ã€ã‚ˆã‚ŠæŸ”è»Ÿãªä½¿ã„æ–¹ã‚’å®Ÿç¾ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### æ©Ÿèƒ½a. AITã®å®Ÿè¡Œ

* âœ… ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼ˆDockerï¼‰ã§AITå®Ÿè¡Œ
* âœ… ãƒ‘ãƒ–ãƒªãƒƒã‚¯AITã®åˆ©ç”¨
* â¬› ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆAITã®åˆ©ç”¨

### æ©Ÿèƒ½b. AITã®å®Ÿè¡Œçµæœè¡¨ç¤º

* âœ… AITãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œçµæœã®é–²è¦§
* â¬› AITãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œçµæœã®æ¸¬å®šå€¤ï¼ˆMeasuresï¼‰ã®å–å¾—
* â¬› AITãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œçµæœã®ä¸€è¦§


---

## ğŸ’¾ Install

### Requirements

* docker
  * sudoç„¡ã—ã§dockerã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ãã‚‹ã“ã¨
* python 3.x, pip


### Step


1. Install

    ```shell
    pip install qunomon-lite
    ```

    é–‹ç™ºä¸­ã®æœ€æ–°ã¯GitHubãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™
    ```shell
    pip install -U git+https://github.com/ads-ad-itcenter/qunomon-lite.git
    ```


## ğŸš€ Usage

### ä½¿ç”¨ä¾‹:

* CUI: [examples/example-cli.md](https://github.com/ads-ad-itcenter/qunomon-lite/blob/main/examples/example-cli.md)
* Python: [examples/example-notebook.ipynb](https://github.com/ads-ad-itcenter/qunomon-lite/blob/main/examples/example-notebook.ipynb)

### AITã®å®Ÿè¡Œï¼ˆãƒ‘ãƒ–ãƒªãƒƒã‚¯AITï¼‰

1. å®Ÿè¡Œã—ãŸã„AITã‚’æ¢ã—ã€AITæ¯ã«æä¾›ã•ã‚Œã¦ã„ã‚‹`ait.manifest.json`ã‚’å‚ç…§ã—ã¦ã€å®Ÿè¡Œã«å¿…è¦ã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¦ãŠã
    * æ¢ã™å ´æ‰€: Qunomonã®GitHubãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰
      ä¾‹: https://github.com/aistairc/qunomon/blob/main/ait_repository/ait/eval_mnist_acc_tf2.3_0.1/deploy/container/repository/ait.manifest.json

1. AITã‚’å®Ÿè¡Œã—ã€çµæœã‚’è¡¨ç¤º

    * CUI:
      ```shell
      qunomon-lite ait run <ait-name>:<ait-version>
        [--inventories <inventory-name>=<path> ... ]
        [--params <param-name>=<value> ... ]

      qunomon-lite ait result-show
      ```

    * Python:
      ```python
      from qunomon_lite import ait

      result = ait.run(
          '<ait-name>:<ait-version>',
          inventories={'<inventory-name>': '<path>', ...},
          params={'<param-name>': '<value>', ...},
      )

      result.show()
      ```

### AITã®å®Ÿè¡Œçµæœè¡¨ç¤º

1. AITå®Ÿè¡Œçµæœã®é–²è¦§

    * CUI:
      ```shell
      qunomon-lite ait result-show {latest|<run-id>}
      ```

    * Python:
      ```python
      result = ait.result(æœªæŒ‡å®š or 'latest' or '<run-id>')   # æœªæŒ‡å®š or 'latest': æœ€æ–°ã®å®Ÿè¡Œçµæœ
      result.show()
      ```


## â„¹ï¸ Anything else


### Troubleshooting

#### qunomon-liteã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆcommand not foundï¼‰

```shell
$ qunomon-lite --help
qunomon-lite: command not found
```

Debianãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®pipã‚³ãƒãƒ³ãƒ‰ï¼ˆpython3-pipï¼‰ã¯ã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ã§`pip install`ã™ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`~/.local` ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ï¼ˆ`--user`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•ã§ä»˜ä¸ï¼‰ã€‚
ãã®ãŸã‚ã€Debianç³»ã®OSï¼ˆDebian, Ubuntu,,,ï¼‰ã§ã€å„OSãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®pipã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼ˆä¾‹. `sudo apt install python3-pip` ï¼‰ã¯ã€`~/.local/bin`ã«PATHã‚’é€šã—ã¦ã¿ã¦ãã ã•ã„ã€‚

```shell
# for example...
$ export PATH="$HOME/.local/bin:$PATH"
```

#### AITå®Ÿè¡Œã§PermissionErrorãŒç™ºç”Ÿï¼ˆPermission deniedï¼‰

```shell
$ qunomon-lite run qunomon/eval_mnist_acc_tf2.3:0.1 ...

...
Running docker container (image: qunomon/eval_mnist_acc_tf2.3:0.1) ...
Error while fetching server API version: ('Connection aborted.', PermissionError(13, 'Permission denied'))
```

å½“ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ã€å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€sudoã›ãšã«dockerã‚³ãƒãƒ³ãƒ‰ãŒåˆ©ç”¨ã§ãã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```shell
# for example...
$ sudo usermod -aG docker $USER
```

## ğŸ“‹ LICENCE

[Apache License 2.0](https://github.com/ads-ad-itcenter/qunomon-lite/blob/main/LICENSE)
